# L000--编程平台

## 三足鼎立

**Windows、macOS 与 Linux**

作为计算机学习的基础，大家需要了解不同操作系统（Operating System, OS）的特点与使用方式。课堂和作业环境以 **Linux (clab 云虚拟机)** 为统一平台，但同学们的本地电脑可能是 **Windows** 或 **macOS**。掌握三者的差异与联系，有助于后续课程中无障碍切换环境。

### Windows

- **特点**
  - 全球使用人数最多的桌面操作系统，界面友好。
  - 广泛用于办公、游戏和通用应用。
  - 软件兼容性最强（Office、QQ、微信、IDEA、VS 等）。
- **优点**
  - 图形化界面直观，上手门槛低。
  - 丰富的商业软件生态。
- **不足**
  - 系统底层封闭，命令行环境（PowerShell / CMD）相对弱于 Linux。
  - 部分开发环境需要额外配置（如编译器、包管理器）。
- **建议**
  - 日常可用 Windows 完成基础办公。
  - 开发课程项目时推荐：
    - **使用 WSL (Windows Subsystem for Linux)** 安装 Ubuntu，体验接近原生的 Linux 环境。
    - 或者直接使用学校提供的 **clab 云虚拟机**。

------

### macOS

- **特点**

  - 苹果电脑专属操作系统，基于 UNIX，内置强大的命令行（Terminal + zsh/bash）。
  - 稳定、安全，适合开发与科研。

- **优点**

  - <mark>与 Linux 命令体系接近，学习 Shell 命令几乎可以无缝迁移</mark>。
  - 自带开发工具链（clang、git、ssh、python）。
  - 适合开发 AI/科研项目，M1/M2/M3 芯片性能强劲。

- **不足**

  - 硬件价格较高。
  - 部分软件兼容性弱（尤其是 Windows 独占软件或游戏）。

------

### Linux

- **特点**
  - 开源、免费的类 UNIX 系统。
  - 广泛用于服务器、科研和云计算，是程序员和科研人员必备技能。
  - 课程统一环境（clab 虚拟机）即为 Linux。
- **优点**
  - 命令行（Shell）功能强大，脚本化、自动化能力突出。
  - 软件包丰富，社区支持活跃（如 Ubuntu、Fedora、RockyLinux）。
- **不足**
  - 图形界面体验较弱（但本课重点在命令行操作）。
  - 对初学者有一定学习曲线。
- **典型发行版**
  - **Ubuntu**：最常见，适合新手。
  - **Fedora / RockyLinux**：学校云虚拟机采用的企业级发行版。
  - **Arch Linux**：极客最爱，灵活但需要深厚功底。

------

### 三者比较

| 特点         | Windows                       | macOS                        | Linux (课程环境)                  |
| ------------ | ----------------------------- | ---------------------------- | --------------------------------- |
| 内核         | Windows NT                    | UNIX                         | Linux Kernel (开源)               |
| 用户界面     | 图形界面为主，命令行较弱      | 图形界面优雅，命令行功能强大 | 以命令行为核心                    |
| 学习曲线     | 最容易上手                    | 对程序员友好                 | 需要练习，但最接近服务器/科研环境 |
| 软件生态     | 办公/游戏丰富，开发需额外配置 | 原生开发工具链 + Apple 生态  | 包管理器安装一切，科研/服务器常用 |
| 推荐使用场景 | 日常学习、办公、娱乐          | 开发、科研、跨平台学习       | 服务器、OJ、分布式、AI项目        |

------

👉 **结论**

- **课堂/作业统一在 Linux (clab VM) 环境完成**，确保一致性与可移植性。
- **Windows 用户**：推荐学习 WSL 或直接用云虚拟机。
- **macOS 用户**：几乎可以无缝衔接 Linux，日常开发可直接在 Mac 上完成。
- **Linux 用户**：本课程就是你的主场。

## 泾渭分明

### 字符界面（CLI）

### 图形界面（GUI）

### 集成开发环境（IDE）

推荐使用开源、轻量的 VS Code 作为本地集成开发环境（IDE）。访问 [VS Code 官网](https://code.visualstudio.com/)，根据操作系统选择相应版本的 VS Code 进行下载和安装。

![从官网下载 VS Code](assets/vscode_installation.png)

VS Code 拥有强大的扩展包生态系统，支持大多数编程语言的运行和调试。以 Python 为例，安装“Python Extension Pack”扩展包之后，即可进行 Python 代码调试。安装步骤如下图所示。

![安装 VS Code 扩展包](assets/vscode_extension_installation.png)

## 虚拟机

虚拟机（Virtual Machine, VM）是一种通过软件模拟的、具有完整硬件系统功能的计算机系统，运行在一个完全隔离的环境中。虚拟机可以运行在物理计算机之上，允许用户在同一台硬件上运行多个操作系统和应用程序，极大地提高了资源利用率和灵活性。

**常见的本地虚拟机软件**

1. **Parallels Desktop**：主要为Mac用户提供了一个运行其他操作系统（如Windows、Linux等）的解决方案。

2. **VirtualBox**：是一款开源的虚拟化产品，由Oracle公司提供支持。它可以安装在多种操作系统上（如Windows、Linux等），并能够运行大量的客户操作系统。VirtualBox因其免费受到广泛欢迎。

**云端虚拟机**

- **clab.pku.edu.cn**：CLab 是服务北大师生的云计算平台。提供基于云的虚拟实验室环境，供学生和研究人员用于教学、学习和科研目的。用户可以通过互联网访问这些虚拟机，执行编程实验、模拟等任务。

无论是本地还是云端的虚拟机，它们都提供了灵活的计算资源分配方案，帮助用户测试软件、开发新应用或进行研究工作，而无需投资额外的硬件设施。随着云计算技术的发展，越来越多的服务迁移到了云端，使得用户可以从任何地方访问高性能的计算资源。

>  写程序时，通常打开终端（terminal），通过 SSH 登录到服务器，使用 vi 编辑代码，并借助 python/g++/gcc 进行解释、编译和调试。
>
>  现在，北京大学为大家提供了这样的实际环境——每位同学和老师都可以领取并使用一台云端虚拟机。该虚拟机配置为 4GB 内存、100GB SSD 硬盘，支持安装 Linux 系统，供大家自由探索和学习。
>
>  👉 申请地址：https://clab.pku.edu.cn/
>  💬 答疑渠道：QQ群 432191140，入群问题答案：linuxclub@pku.edu.cn


### 部署虚拟机意义？

部署虚拟机的意义主要体现在以下几个方面：  
1. **与云端环境接轨，培养云计算使用习惯**  
 - 现代 AI 计算通常依赖云端 GPU 资源（如 AWS、Google Cloud、Azure），本地机器性能有限，无法高效运行大模型。  
    - 通过虚拟机模拟远程服务器环境，让大家<mark>熟悉 SSH 登录、环境配置、远程代码执行等操作</mark>，为后续使用云端资源打下基础。  
2. **隔离环境，避免污染本地系统**  
  - <mark>大模型部署涉及大量 Python 依赖（如 CUDA、PyTorch、Transformers），可能与本地已有环境冲突</mark>。  
   - 在虚拟机或 Docker 容器中运行，可以隔离依赖，避免影响日常工作环境。  

3. **统一环境，减少兼容性问题**  
  - 本地机器硬件和系统差异较大（Windows/Linux/Mac），直接安装可能遇到驱动、CUDA 版本兼容性问题。  
   - <mark>通过虚拟机，大家可以在统一的 Linux 服务器环境下测试，确保配置一致，提高稳定性</mark>。  

4. **便于迁移到云端服务器**  
  - 如果在本地虚拟机上调试成功，可以无缝迁移到真正的云服务器，而无需重新配置环境。  
   - 这样可以降低云端服务器的调试成本，提高使用效率。  

**结论**  即使本地能跑通大模型，使用虚拟机仍然有 **环境隔离、与云端兼容、避免污染本机、提高可移植性** 等重要作用。部署虚拟机不仅是为了当前测试，更是为未来高效使用云端计算资源做准备。

> 部署虚拟机提供了一个分布式计算环境，在这个环境中每个虚拟机都可以作为一个独立的计算节点运行。当你有一个需要大量计算资源的任务时（比如分治任务），可以将这个任务分解成多个较小的子任务，并将这些子任务分配给不同的虚拟机来并行处理。这样做的好处是可以大幅减少总计算时间，因为多个子任务可以同时在不同的机器上执行。
>
> 利用部署的虚拟机集群来执行具体的计算任务。具体来说，一旦所有虚拟机都设置好并且可以通过SSH访问（即公钥已经添加到各个虚拟机的`authorized_keys`文件中），就可以通过编写脚本自动登录各个虚拟机、分发任务以及收集结果。

100个选课学生创建的虚拟机可以形成一个分布式系统

Clab.pku.edu.cn 云虚拟机，为每个用户提供 4 CPU, 4 GB RAM, 100 GB Disk。每个虚拟机的 .ssh/authorized_keys，保存了可以ssh 登录虚拟机的公钥。我们班100人，共 440 CPU, 440 GB, 11000 GB Disk。如果大家互相把每人的公钥（保存在各位本地机器 .ssh/id_ed25519.pub中的字符串），加入虚拟机的 authorized_keys，则 100个虚拟机可以形成一个分布式系统，可以用来计算分治任务。 

> <mark>分治任务</mark>是一种将问题分解成更小的子问题，分别求解这些子问题，然后合并这些子问题的解来得到原问题解的方法。一个典型的例子是计算一个大数组中所有元素的和。我们可以将这个数组分割成若干个较小的数组，每个虚拟机负责计算其对应的小数组的和，最后再将这些结果汇总起来得到整个数组的和。
>
> 登录云端服务器并利用云端计算资源，是现代开发和计算任务中常见的工作方式。一旦掌握了相关技能，便可以高效地使用云端服务器，拓展更多应用场景和计算任务。相比之下，本地设备通常性能有限，更适用于日常开发和基础调试。
>
